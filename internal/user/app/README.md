# app 层

`app` 应用逻辑是 "粘合 "其他层的薄层。 它也被称为 "用例"。

如果你读了这段代码，却无法判断它使用了什么数据库或调用了什么URL，这是个好兆头。有时它很短，这很好。把它当作一个编排器吧。

作用
- 封装CQRS，业务编排
- 调用`adapters`层
- DTO定义
- 定义业务相关的接口，防腐用；该接口的定义推荐业务语义化，不要简单的UpdateXXX，CreateXXX。
  - 如果业务非常简单，比如就是一个CURD，并没有聚合其他业务的数据，那么可以直接调 repository 接口的实现，就不用定义新的接口了
  - 如果业务复杂，除了调本项目内部 repository，还要调其他项目的提供的服务，比如走grpc协议。那么需要**定义个接口**，在实现的时候 `struct` 包含 repository + grpcClient
  - 如果需要定义的接口可共用，则可以抽象出来，单独定义在一个 `services.go` 文件中；如果简单，就定义在对应业务中

